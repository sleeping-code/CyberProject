<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Step 2: Threat Identification</title>
  <link href="UI.css" rel="stylesheet">
</head>
<body class="m-0 font-sans bg-gray-900 text-white flex flex-col h-screen">
  <header>
    <div class="flex justify-between items-center p-5 bg-gray-800">
      <h1 class="text-2xl">RMF STEPS</h1>
      <nav>
        <a href="step1.html" class="text-white hover:underline ml-5">Dashboard</a>
        <a href="home.html" class="text-white hover:underline ml-5">Home Page</a>
        <a href="#" class="text-white hover:underline ml-5">Contact Us</a>
        <a href="#" class="text-white hover:underline ml-5">About Us</a>
        <a href="#" class="text-white hover:underline ml-5">Steps Explanation</a>
      </nav>
    </div>
  </header>

  <div class="flex w-full flex-grow">
    <aside class="w-1/5 bg-indigo-900 p-5">
      <h2 class="text-center text-lg mb-5">RMF Steps</h2>
      <ul class="list-none p-0">
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-pointer">System Characterization</li>
        <li class="bg-indigo-700 p-2 mb-2 text-center cursor-pointer">Threat Identification</li>
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-not-allowed">Vulnerability Identification</li>
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-not-allowed">Control Analysis</li>
      
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-not-allowed">Likelihood Determination</li>
        
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-not-allowed">Impact Analysis</li>
    
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-not-allowed">Risk Determination</li>
      
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-not-allowed">Control Recommendations</li>
      
        <li class="bg-indigo-600 opacity-50 p-2 mb-2 text-center cursor-not-allowed">Results</li>
     
    
       
      </ul>
    </aside>

    <main class="w-4/5 p-5">
      <header class="flex justify-between items-center mb-5">
        <h1 class="text-xl">Step 2: Threat Identification</h1>
      </header>

      <form id="step2-form" action="step3.html" method="POST" onsubmit="return validateForm()">
        <label for="system-name" class="block mb-2">System Name:</label>
        <input type="text" id="system-name" name="system-name" required 
               class="w-full p-2 mb-5 border rounded text-black">

        <div class="mb-8">
          <h2 class="text-xl font-semibold mb-4">Threat Sources</h2>
          
          <fieldset class="mb-6">
            <legend class="block mb-2 font-medium">Threat Categories:</legend>
            <div class="grid grid-cols-3 gap-4">
              <div class="border p-3 rounded">
                <h3 class="font-medium mb-2">Internal Threats</h3>
                <label class="block"><input type="checkbox"> Disgruntled employees</label>
                <label class="block"><input type="checkbox"> Contractors</label>
                <label class="block"><input type="checkbox"> Accidental misuse</label>
              </div>
              <div class="border p-3 rounded">
                <h3 class="font-medium mb-2">External Threats</h3>
                <label class="block"><input type="checkbox"> Hackers</label>
                <label class="block"><input type="checkbox"> Nation-states</label>
                <label class="block"><input type="checkbox"> Competitors</label>
              </div>
              <div class="border p-3 rounded">
                <h3 class="font-medium mb-2">Environmental Threats</h3>
                <label class="block"><input type="checkbox"> Natural disasters</label>
                <label class="block"><input type="checkbox"> Power outages</label>
              </div>
            </div>
          </fieldset>

          <div class="mb-6">
            <label class="block mb-2 font-medium">Threat Motivation:</label>
            <select class="w-full p-2 border rounded text-black">
              <option value="">Select Motivation</option>
              <option>Financial gain</option>
              <option>Espionage</option>
              <option>Hacktivism</option>
              <option>Accidental</option>
              <option>Sabotage</option>
            </select>
          </div>

          <div class="mb-6">
            <label class="block mb-2 font-medium">Threat Capacity (1-5):</label>
            <div class="flex items-center">
              <input type="range" id="capacity" min="1" max="5" value="3" 
                     class="flex-1" oninput="updateCapacityValue(this.value)">
              <span id="capacityValue" class="ml-3">3</span>
            </div>
          </div>
        </div>

        <div class="mb-8">
          <h2 class="text-xl font-semibold mb-4">MISP Threat Intelligence</h2>
          
          <div class="mb-4 flex gap-4">
            <select id="severityFilter" class="p-2 border rounded text-black" onchange="filterMISPThreats()">
              <option value="">All Severities</option>
              <option>Critical</option>
              <option>High</option>
              <option>Medium</option>
              <option>Low</option>
            </select>
            
            <input type="text" id="relevanceFilter" placeholder="Filter by relevance..." 
                   class="p-2 border rounded flex-1 text-black" oninput="filterMISPThreats()">
          </div>

          <div id="mispThreats" class="border rounded p-3 bg-gray-800">
            <!-- Threat items populated by JavaScript -->
          </div>
        </div>

        <div class="flex justify-between mt-8">
          <button type="button" onclick="window.location.href='step1.html'" 
                  class="bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-500">
            Previous
          </button>
          <button type="submit" class="bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-500">
            Next
          </button>
        </div>
      </form>
    </main>
  </div>

  <footer class="bg-gray-800 p-10 mt-0">
    <div class="container mx-auto text-center">
      <h3 class="text-2xl mb-5">Stay Connected</h3>
      <p class="mb-5">Follow us on social media for the latest updates and news.</p>
      <div class="flex justify-center mb-5">
        <a href="#" class="text-white mx-3 hover:underline">Facebook</a>
        <a href="#" class="text-white mx-3 hover:underline">Twitter</a>
        <a href="#" class="text-white mx-3 hover:underline">LinkedIn</a>
        <a href="#" class="text-white mx-3 hover:underline">Instagram</a>
      </div>
      <p class="mb-5">Â© 2025 Group 2. All rights reserved.</p>
      <p>For inquiries, please contact us at <a href="mailto:#" class="text-purple-500 hover:underline">kelompok2@gmail.com</a></p>
    </div>
  </footer>

  <script>
    function updateCapacityValue(value) {
      document.getElementById('capacityValue').textContent = value;
    }

    const mispThreatsData = [
      { id: 1, title: "CVE-2023-1234: Apache Log4j RCE Vulnerability", severity: "Critical", relevance: "Apache servers" },
      { id: 2, title: "Phishing Campaign: TA505 Activity", severity: "High", relevance: "Email systems" },
      { id: 3, title: "Power Grid Vulnerability", severity: "Medium", relevance: "Infrastructure" },
    ];

    function filterMISPThreats() {
      const severity = document.getElementById('severityFilter').value;
      const relevance = document.getElementById('relevanceFilter').value.toLowerCase();
      const container = document.getElementById('mispThreats');
      
      container.innerHTML = mispThreatsData
        .filter(threat => 
          (!severity || threat.severity === severity) &&
          (!relevance || threat.relevance.toLowerCase().includes(relevance))
        )
        .map(threat => `
          <div class="p-2 mb-2 border-b border-gray-600">
            <h3 class="font-medium">${threat.title}</h3>
            <div class="text-sm text-gray-400">
              Severity: ${threat.severity} | Relevance: ${threat.relevance}
            </div>
          </div>
        `).join('');
    }

    // Initial load
    filterMISPThreats();
  </script>
</body>
</html>